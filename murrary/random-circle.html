<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>D3.js</title>
</head>
<body>

	<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
	<script>
		var dataset = [];
		for (var i = 0; i < 50; i++) {
			var randomNum = Math.floor(Math.random() * 50);
			dataset.push(randomNum);
		}

		var dataset2 = [];
		for (var i = 0; i < 50; i++) {
			var randomNum = Math.floor(Math.random() * 50);
			dataset2.push(randomNum);
		}

		var w = 1024;
		var h = 500;

		var svg = d3.select("body").append("svg").attr({
			width: w,
			height: h
		});

		/*svg.selectAll("circle")
			.data(dataset)
			.enter()
			.append("circle")
			.attr({
				cx: function(d, i) {return 50 + (i * 100);},
				cy: h / 2,
				r: 0,
				fill: "red"
			})
			.transition()
			.delay(function(d, i) {
				return i * 300;
			})
			.duration(1500)
			.ease("in")
			.attr({
				r: function(d) {return d;}
			});*/

		svg.selectAll("circle")
			.data(dataset)
			.enter()
			.append("circle")
			.transition()
			.delay(function(d, i) {
				return i * 300;
			})
			.duration(1200)
			.ease("bounce")
			.each("start", function() {
				d3.select(this).attr({
					r: 0,
					cy: h
				})
			})
			.attr({
				// cx: function(d, i) {return 50 + (i * 100);},
				// cy: function(d, i) {return Math.floor(Math.random() * 100 + 1) + 50},
				cx: function(d, i) {return 50 + (i * 20);},
				cy: function(d) {return Math.floor(Math.random() * 500 + 1) + 50;},
				r: function(d) {return d;},
				fill: function(d) {return "rgb(0, 0, " + (d * 10) + ")"}
			})
			.each("end", function() {
				d3.select(this)
					.transition()
					.duration(1000)
					.attr({
						r: 0,
						cy: 0
					})
			});


/*		svg.selectAll("circle")
			.data(dataset2)
			.enter()
			.append("circle")
			.transition()
			.delay(function(d, i) {
				return i * 300;
			})
			.duration(1200)
			.ease("bounce")
			.each("start", function() {
				d3.select(this).attr({
					r: 0,
					cx: 0
				})
			})
			.attr({
				cx: function(d, i) {return 50 + (i * 20);},
				cy: function(d) {return Math.floor(Math.random() * 500 + 1) + 50;},
				r: function(d) {return d;},
				fill: function(d) {return "rgb(" + (d * 10) + ", 0, 0)"}
			})
			.each("end", function() {
				d3.select(this)
					.transition()
					.duration(1000)
					.attr({
						r: 0,
						cx: w
					})
			});*/


		svg.selectAll("rect")
			.data(dataset2)
			.enter()
			.append("rect")
			.transition()
			.delay(function(d, i) {
				return i * 300;
			})
			.duration(1000)
			.ease("ease-in")
			.each("start", function() {
				d3.select(this).attr({
					x: 0,
					width: 0,
					height: 0
				})
			})
			.attr({
				// cx: function(d, i) {return 50 + (i * 100);},
				// cy: function(d, i) {return Math.floor(Math.random() * 100 + 1) + 50},
				x: function(d, i) {return 50 + (i * 20);},
				y: function(d) {return Math.floor(Math.random() * 500 + 1) + 50;},
				fill: function(d) {return "rgb(" + (d * 10) + ", 0, 0)"},
				width: function(d) {return d;},
				height: function(d) {return d;}
			})
			.each("end", function() {
				d3.select(this)
					.transition()
					.duration(500)
					.attr({
						x: w,
						width: 0,
						height: 0
					})
			});



	</script>
</body>
</html>